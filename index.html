<!DOCTYPE html>
<html>
<body>
    <h1>Attendance System</h1>
    <button id="connect-btn" onclick="connectESP32()">1. Connect to ESP32</button>
    <button id="start-btn">2. Start Camera</button>
    <hr>
    <video id="video" width="320" height="320" autoplay></video>
    <p id="results">Waiting for detection...</p>

    <script src="edge-impulse-standalone.js"></script>
    <script src="run-impulse.js"></script>
    <script>
        document.getElementById('start-btn').onclick = async () => {
            const video = document.getElementById('video');
            const stream = await navigator.mediaDevices.getUserMedia({ video: true });
            video.srcObject = stream;
            
            // Start the automatic classification loop
            const classifier = new EdgeImpulseClassifier();
            await classifier.init();
            runAutoDetection(classifier, video);
        };
    </script>
</body>
</html>